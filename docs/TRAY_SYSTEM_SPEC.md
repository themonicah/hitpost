# HitPost Tray System Specification

## Overview

The tray system provides a consistent, layered UI pattern for all dump-related workflows. Trays slide up from the bottom of the screen, can stack on top of each other, and use spring animations for a natural feel.

## Design Principles

1. **Context Preservation** - Trays overlay content rather than replacing screens
2. **Variable Heights** - Each tray level has different height to show progression
3. **Spring Animations** - Bouncy transitions for natural feel
4. **Push-Back Effect** - Background trays scale down and dim when a new tray opens

## Tray Hierarchy

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        HOME SCREEN                               â”‚
â”‚                                                                  â”‚
â”‚    Scattered polaroid dumps on "messy desk"                     â”‚
â”‚                                                                  â”‚
â”‚    [Draft Dump] [Draft Dump] [Sent Dump] [Sent Dump]           â”‚
â”‚                                                                  â”‚
â”‚                                              [ğŸ’© FAB]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                   â”‚                   â”‚
          â–¼                   â–¼                   â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ TAP FAB   â”‚      â”‚ TAP DRAFT â”‚      â”‚ TAP SENT  â”‚
    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
          â”‚                   â”‚                   â”‚
          â–¼                   â–¼                   â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ NEW DUMP  â”‚      â”‚ EDIT DUMP â”‚      â”‚ SENT DUMP â”‚
    â”‚   TRAY    â”‚      â”‚   TRAY    â”‚      â”‚   TRAY    â”‚
    â”‚  (75vh)   â”‚      â”‚  (75vh)   â”‚      â”‚  (85vh)   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Tray Types

### 1. New Dump Tray (AddToDumpModal - New Mode)

**Entry Point:** FAB button tap

**Height:** 75vh

**Initial State:**
- Empty memes list
- Empty name field
- No recipients selected
- Action button: "Save Draft" (disabled until has content)

**Layout:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ•        New Dump        [Action]  â”‚  â† Action = "Save Draft" or "Send Now"
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Name: [____________________]       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚      [+ Add memes]          â”‚    â”‚  â† Opens camera roll
â”‚  â”‚      From your camera roll  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ğŸ‘¥ Send to...  â†’]                 â”‚  â† Opens Recipients Tray
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Transitions:**
- Tap "Add memes" â†’ Opens device camera roll (native picker)
- Tap "Send to..." â†’ Opens Recipients Tray (stacks on top)
- Tap âœ• â†’ Closes tray (warns if unsaved changes)
- Tap "Save Draft" â†’ Saves and closes
- Tap "Send Now" â†’ Shows confirmation â†’ Sends â†’ Shows confetti â†’ Closes

---

### 2. Edit Dump Tray (AddToDumpModal - Edit Mode)

**Entry Point:** Tap a DRAFT polaroid

**Height:** 75vh

**Initial State:**
- Pre-populated with existing memes
- Pre-populated name
- No recipients (drafts don't have recipients yet)
- Action button: "Save Draft" or "Send Now"

**Layout:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ•       [Dump Name]        [Action]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Name: [Current Name_______]        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”                      â”‚
â”‚  â”‚   â”‚   â”‚   â”‚  16 memes            â”‚
â”‚  â”œâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¤  Ready to send       â”‚
â”‚  â”‚   â”‚   â”‚   â”‚                      â”‚
â”‚  â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜                      â”‚
â”‚  [+ Add more]                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ğŸ‘¥ Send to...  â†’]                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Transitions:** Same as New Dump Tray

---

### 3. Recipients Tray

**Entry Point:** Tap "Send to..." from Dump Tray

**Height:** 85vh (taller than parent to show progression)

**Layout:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â†        Recipients         Done   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  CONNECTED (gets push)              â”‚
â”‚  [âœ“] John D.                        â”‚
â”‚  [ ] Mom                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  NOT CONNECTED (needs link)         â”‚
â”‚  [ ] Sarah K.                       â”‚
â”‚  [âœ“] Will P.                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  GROUPS                             â”‚
â”‚  [ ] Work Friends (5)               â”‚
â”‚  [âœ“] Family (3)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ADD SOMEONE NEW                    â”‚
â”‚  [Name...____________] [Add]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Transitions:**
- Tap â† or "Done" â†’ Closes recipients tray, returns to parent dump tray
- Selections are preserved when returning

**Animation:**
- Opens: `animate-tray-up` with spring easing
- Parent tray: `animate-tray-push-back` (scales to 92%, dims, shifts up 8px)
- Closes: `animate-tray-down`, parent: `animate-tray-pull-forward`

---

### 4. Sent Dump Tray (SentDumpDrawer)

**Entry Point:** Tap a SENT polaroid

**Height:** 85vh

**State:** Read-only view of sent dump

**Layout:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ•        [Dump Name]               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚  â”‚ [meme]    â”‚   3/5 opened         â”‚
â”‚  â”‚   stack   â”‚   12 memes Â· 8 views â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  RECIPIENTS                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ [M] meesh                   â”‚    â”‚
â”‚  â”‚     Not opened yet   [Copy] â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚ [M] Monica P.       ğŸ˜‚ğŸ”¥   â”‚    â”‚
â”‚  â”‚     Opened Â· 3 views [Copy] â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚       Sent 1/10/2026, 9:38 AM       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Transitions:**
- Tap âœ• â†’ Closes tray
- Tap "Copy" â†’ Copies recipient's unique link

---

## State Machine

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚    HOME      â”‚
                    â”‚   SCREEN     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                   â”‚                   â”‚
  [Tap FAB]          [Tap Draft]         [Tap Sent]
       â”‚                   â”‚                   â”‚
       â–¼                   â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  NEW DUMP    â”‚    â”‚  EDIT DUMP   â”‚    â”‚  SENT DUMP   â”‚
â”‚    TRAY      â”‚    â”‚    TRAY      â”‚    â”‚    TRAY      â”‚
â”‚              â”‚    â”‚              â”‚    â”‚  (read-only) â”‚
â”‚ activeView:  â”‚    â”‚ activeView:  â”‚    â”‚              â”‚
â”‚   "main"     â”‚    â”‚   "main"     â”‚    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
       â”‚                   â”‚              [Tap âœ•]
       â”‚                   â”‚                   â”‚
  [Tap "Send to..."]  [Tap "Send to..."]       â–¼
       â”‚                   â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â–¼                   â–¼              â”‚  CLOSE   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  RECIPIENTS  â”‚    â”‚  RECIPIENTS  â”‚
â”‚    TRAY      â”‚    â”‚    TRAY      â”‚
â”‚              â”‚    â”‚              â”‚
â”‚ activeView:  â”‚    â”‚ activeView:  â”‚
â”‚ "recipients" â”‚    â”‚ "recipients" â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                   â”‚
  [Tap Done/â†]        [Tap Done/â†]
       â”‚                   â”‚
       â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DUMP TRAY   â”‚    â”‚  DUMP TRAY   â”‚
â”‚ activeView:  â”‚    â”‚ activeView:  â”‚
â”‚   "main"     â”‚    â”‚   "main"     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Animation Specifications

### Spring Easing
```css
cubic-bezier(0.34, 1.56, 0.64, 1)  /* overshoots for bounce */
```

### Tray Slide Up
```css
@keyframes traySlideUp {
  0% { transform: translateY(100%); opacity: 0.8; }
  100% { transform: translateY(0); opacity: 1; }
}
animation: traySlideUp 0.45s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
```

### Push Back (Parent Tray)
```css
@keyframes trayPushBack {
  0% { transform: scale(1) translateY(0); opacity: 1; filter: brightness(1); }
  100% { transform: scale(0.92) translateY(-8px); opacity: 0.5; filter: brightness(0.85); }
}
animation: trayPushBack 0.4s cubic-bezier(0.34, 1.2, 0.64, 1) forwards;
```

## Action Button Logic

| Has Memes? | Has Recipients? | Button Text | Button State |
|------------|-----------------|-------------|--------------|
| No         | Any             | Save Draft  | Disabled     |
| Yes        | No              | Save Draft  | Enabled      |
| Yes        | Yes             | Send Now    | Enabled      |

## Error States

1. **Network Error** - Show inline error message, allow retry
2. **Upload Failed** - Show toast with retry option
3. **Send Failed** - Stay on tray, show error, allow retry

## Accessibility

- All trays have proper focus management
- Backdrop click closes tray
- Escape key closes tray
- All buttons have min 44px touch targets
- Screen readers announce tray opening/closing

## Files

| File | Purpose |
|------|---------|
| `src/components/AddToDumpModal.tsx` | New/Edit dump tray with recipients sub-tray |
| `src/components/SentDumpDrawer.tsx` | Read-only sent dump tray |
| `src/app/globals.css` | Tray animation keyframes |
| `src/app/HomeContent.tsx` | Orchestrates which tray is open |
